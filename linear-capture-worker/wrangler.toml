name = "linear-capture-ai"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "linear-captures"

[[kv_namespaces]]
binding = "OAUTH_TOKENS"
id = "7b7a232959794d4f846ef0d8e8187be8"

[[kv_namespaces]]
binding = "ANALYTICS_KV"
id = "e644b470b7474c3089de41837da3e737"

[vars]
R2_PUBLIC_URL = "https://pub-235a750bab114df78449a6fb9613e208.r2.dev"

# Secrets: wrangler secret put <NAME>
# - GEMINI_API_KEY
# - ANTHROPIC_API_KEY
# - TOKEN_ENCRYPTION_KEY (64-char hex for AES-256)
# - SLACK_CLIENT_ID
# - SLACK_CLIENT_SECRET

# Workers AI binding
[ai]
binding = "AI"

# Vectorize index bindings
[[vectorize]]
binding = "GMAIL_VECTORS"
index_name = "gmail-vectors"

[[vectorize]]
binding = "SLACK_VECTORS"
index_name = "slack-vectors"

[[vectorize]]
binding = "NOTION_VECTORS"
index_name = "notion-vectors"

[[vectorize]]
binding = "LINEAR_VECTORS"
index_name = "linear-vectors"

[placement]
mode = "smart"
hint = "wnam"
